# Лабораторная работа №3: Паттерн Builder

## Описание сути работы

Данная лабораторная работа демонстрирует реализацию паттерна проектирования "Builder" (Строитель) на языке Python. Паттерн Builder используется для пошагового создания сложных объектов, позволяя отделить конструирование объекта от его представления.

Основные концепции, реализованные в работе:
- Разделение mutable (изменяемых) и immutable (неизменяемых) моделей данных
- Поэтапное создание объектов через цепочку методов (fluent interface)
- Валидация данных на каждом этапе построения
- Использование базы данных для хранения объектов с ID-ссылками
- Высокоуровневые конфигураторы для создания стандартных наборов объектов

## Структура проекта

#### Требования к запуску

Для запуска проекта необходим:
- Python 3.7 или выше
- Стандартная библиотека Python (нет внешних зависимостей)

#### Инструкция по запуску

1. Сохраните код в файл `builder.py`
2. Запустите выполнение командой:
   ```
   python builder.py
   ```

Программа продемонстрирует:
- Создание заказа через высокоуровневый конфигуратор
- Работу валидации с отображением ошибок
- Использование fluent interface билдеров
- Структуру созданных объектов

### Модели данных

**Mutable модели (для Builder):**
- `MutableProduct` - изменяемая модель продукта с валидацией в сеттерах
- `MutableOrderItem` - изменяемая модель элемента заказа
- `MutableOrder` - изменяемая модель заказа

**Immutable модели (результат Builder):**
- `Product` - неизменяемая модель продукта (`@dataclass(frozen=True)`)
- `OrderItem` - неизменяемая модель элемента заказа с ссылкой на продукт по ID
- `Order` - неизменяемая модель заказа

### База данных
- `Database` - простейшая реализация базы данных для хранения объектов по их идентификаторам
- Хранение продуктов и заказов в словарях с доступом по ID
- Обеспечение ссылочной целостности через ID

### Билдеры
- `ProductBuilder` - строитель для создания объектов Product
- `OrderItemBuilder` - строитель для создания объектов OrderItem  
- `OrderBuilder` - строитель для создания объектов Order

Особенности реализации билдеров:
- Используют соответствующие mutable модели для промежуточного хранения состояния
- Реализуют fluent interface (цепочка вызовов методов)
- Включают валидацию с указанием номера строки, где произошла ошибка
- Создают immutable объекты при вызове метода `build()`
- Автоматически регистрируют созданные объекты в базе данных

### Высокоуровневый конфигуратор
- `StoreConfigurator` - класс для создания стандартных наборов объектов
- Метод `create_electronics_pack()` демонстрирует создание готового заказа с электроникой

### Основной модуль
- Функция `main()` демонстрирует работу всей системы
- Примеры создания объектов через билдеры
- Демонстрация валидации с обработкой ошибок

## Вывод

В результате выполнения лабораторной работы была успешно реализована система управления заказами с использованием паттерна Builder. Основные достижения:

1. **Реализовано разделение mutable/immutable моделей**: Mutable модели используются в процессе построения объектов, а immutable - как конечный результат, что обеспечивает безопасность данных.

2. **Создана гибкая система валидации**: Валидация выполняется на уровне сеттеров mutable моделей и при сборке конечного объекта, с подробными сообщениями об ошибках, включая номера строк кода.

3. **Реализована база данных с ID-ссылками**: Объекты ссылаются друг на друга через идентификаторы, что обеспечивает целостность данных и возможность сериализации.

4. **Достигнута инкапсуляция процесса создания**: Пользователь работает с простым fluent interface, скрывающим сложность внутренней структуры объектов.

5. **Обеспечена расширяемость системы**: Добавление новых типов объектов и билдеров не требует изменения существующего кода.

Паттерн Builder показал свою эффективность для создания сложных объектов с множеством параметров, обеспечивая читаемость кода, безопасность типов и удобство валидации на каждом этапе построения.